<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚˜ì˜ ì•„í”ˆ ê³³ì€? - AI ê±´ê°• ê°€ì´ë“œ</title>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap');

        :root {
            --primary-color: #007bff;
            --light-gray: #f8f9fa;
            --dark-gray: #343a40;
            --border-color: #dee2e6;
            --selected-color: #28a745;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: var(--light-gray);
            color: var(--dark-gray);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        /* --- ë°ìŠ¤í¬íƒ‘ìš© 2ë‹¨ ë ˆì´ì•„ì›ƒ --- */
        .container {
            display: flex;
            gap: 30px;
            background-color: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 1100px; /* ë°ìŠ¤í¬íƒ‘ì— ë§ê²Œ ë„ˆë¹„ í™•ì¥ */
            min-height: 700px;
        }

        .left-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-right: 1px solid var(--border-color);
            padding-right: 30px;
        }
        
        #body-map-container {
            width: 100%;
            max-width: 400px; /* SVG ìµœëŒ€ ë„ˆë¹„ ì œí•œ */
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #body-map-container object {
            width: 100%;
            height: auto;
            max-height: 600px; /* SVG ìµœëŒ€ ë†’ì´ ì œí•œìœ¼ë¡œ ìŠ¤í¬ë¡¤ ë°©ì§€ */
        }

        .right-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        /* --- ê¸°ë³¸ ì»´í¬ë„ŒíŠ¸ ìŠ¤íƒ€ì¼ --- */
        h1 {
            text-align: center;
            color: var(--primary-color);
            margin-top: 0;
            margin-bottom: 5px;
        }

        h1 .subtitle {
            display: block;
            font-size: 1rem;
            color: #6c757d;
            font-weight: 400;
        }

        h2 {
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
            margin-top: 20px;
            margin-bottom: 20px;
            font-size: 1.4rem;
            text-align: left;
        }

        .disclaimer {
            background-color: #fff3cd;
            border: 1px solid #ffeeba;
            border-radius: 8px;
            padding: 15px;
            font-size: 0.9rem;
            text-align: center;
            margin-bottom: 30px;
        }

        .options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: flex-start;
        }

        .btn {
            padding: 12px 20px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background-color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            font-family: 'Noto Sans KR', sans-serif;
            min-width: 80px;
            text-align: center;
        }

        .btn:hover {
            background-color: #e9ecef;
            border-color: #adb5bd;
        }

        .btn.selected {
            background-color: var(--selected-color);
            color: white;
            border-color: var(--selected-color);
            font-weight: 700;
        }

        .btn-next {
            width: 100%;
            background-color: var(--primary-color);
            color: white;
            font-weight: 700;
            font-size: 1.1rem;
            margin-top: auto; /* ë²„íŠ¼ì„ í•­ìƒ ì•„ë˜ì— ìœ„ì¹˜ì‹œí‚´ */
            padding: 15px;
        }

        .btn-next:hover {
            opacity: 0.9;
            background-color: var(--primary-color);
        }

        textarea {
            width: 100%;
            height: 80px;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 1rem;
            resize: vertical;
            margin-bottom: 20px;
        }

        .hidden {
            display: none;
        }

        .result-box {
            background-color: var(--light-gray);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- ì™¼ìª½ íŒ¨ë„: ì‹ ì²´ ì§€ë„ -->
        <div id="left-panel" class="left-panel hidden">
            <div id="body-map-container">
                <object type="image/svg+xml" data="front-fulld-body.svg" id="body-svg">
                    <img src="front-fulld-body.png" alt="ì¸ì²´ ìƒì„¸ ì´ë¯¸ì§€">
                </object>
            </div>
        </div>

        <!-- ì˜¤ë¥¸ìª½ íŒ¨ë„: ë‹¨ê³„ë³„ ì§ˆë¬¸ -->
        <div class="right-panel">
            <section id="step1_gender">
                <h1>ë‚˜ì˜ ì•„í”ˆ ê³³ì€? <span class="subtitle">AI ê±´ê°• ê°€ì´ë“œ</span></h1>
                <p class="disclaimer">
                    âš ï¸ <strong>ì¤‘ìš” ì•ˆë‚´:</strong> ë³¸ í”„ë¡œê·¸ë¨ì€ ì˜ë£Œì  ì§„ë‹¨ì´ ì•„ë‹ˆë©°, ì°¸ê³ ìš©ìœ¼ë¡œë§Œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
                </p>
                <h2>1ë‹¨ê³„: ì„±ë³„ì„ ì„ íƒí•˜ì„¸ìš”</h2>
                <div class="options">
                    <button class="btn gender-btn" data-gender="male">ë‚¨ì„±</button>
                    <button class="btn gender-btn" data-gender="female">ì—¬ì„±</button>
                </div>
            </section>

            <section id="step2_bodypart" class="hidden">
                <h2>2ë‹¨ê³„: ì•„í”ˆ ë¶€ìœ„ë¥¼ ì„ íƒí•˜ì„¸ìš”</h2>
                <p>ì™¼ìª½ ì‹ ì²´ ì§€ë„ì—ì„œ ì•„í”ˆ ë¶€ìœ„ì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ê±°ë‚˜ í´ë¦­í•˜ì„¸ìš”.</p>
            </section>

            <section id="step3_symptoms" class="hidden">
                <h2>3ë‹¨ê³„: ì¦ìƒì„ ëª¨ë‘ ì„ íƒí•˜ì„¸ìš” ğŸ¤’</h2>
                <div id="symptom-options" class="options"></div>
                <textarea id="symptom-details" placeholder="ì„ íƒì§€ì— ì—†ëŠ” ì¦ìƒì´ë‚˜ ë” ìì„¸í•œ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”."></textarea>
                <button id="to-step4-btn" class="btn btn-next">ë‹¤ìŒ ë‹¨ê³„ë¡œ</button>
            </section>

            <section id="step4_conditions" class="hidden">
                <h2>4ë‹¨ê³„: ì¦ìƒì´ ë‚˜íƒ€ë‚˜ê¸° ì „ ìƒí™©ì„ ì•Œë ¤ì£¼ì„¸ìš” âœï¸</h2>
                <div class="options">
                    <button class="btn condition-btn" data-condition="ìˆ˜ë©´ ë¶€ì¡±">ìˆ˜ë©´ ë¶€ì¡±</button>
                    <button class="btn condition-btn" data-condition="ìŠ¤íŠ¸ë ˆìŠ¤">ìŠ¤íŠ¸ë ˆìŠ¤</button>
                    <button class="btn condition-btn" data-condition="ê³¼ì‹">ê³¼ì‹</button>
                    <button class="btn condition-btn" data-condition="ê³¼ìŒ">ê³¼ìŒ</button>
                    <button class="btn condition-btn" data-condition="ìš´ë™ í›„">ìš´ë™/í™œë™ í›„</button>
                    <button class="btn condition-btn" data-condition="ìê³  ì¼ì–´ë‚œ í›„">ìê³  ì¼ì–´ë‚œ í›„</button>
                </div>
                <button id="get-result-btn" class="btn btn-next">AI ë¶„ì„ ê²°ê³¼ ë³´ê¸°</button>
            </section>

            <section id="result" class="hidden">
                <h2>AI ë¶„ì„ ë° ë§ì¶¤í˜• ì¡°ì–¸</h2>
                <div id="result-content" class="result-box"></div>
                <button id="restart-btn" class="btn btn-next">ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘</button>
            </section>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DOM ìš”ì†Œ ì„ íƒ ---
            const leftPanel = document.getElementById('left-panel');
            const steps = {
                gender: document.getElementById('step1_gender'),
                bodyPart: document.getElementById('step2_bodypart'),
                symptoms: document.getElementById('step3_symptoms'),
                conditions: document.getElementById('step4_conditions'),
                result: document.getElementById('result')
            };
            const bodyObject = document.getElementById('body-svg');
            const symptomOptionsContainer = document.getElementById('symptom-options');
            const resultContent = document.getElementById('result-content');

            // --- ë°ì´í„° ë° ì„¤ì • ---
            let userSelections = { gender: null, part: null, symptoms: [], conditions: [] };
            const symptomsData = {
                // SVG íŒŒì¼ ë‚´ë¶€ì˜ pathì— ë¶€ì—¬ëœ í´ë˜ìŠ¤ ì´ë¦„ê³¼ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.
                head: ['ë‘í†µ', 'ì–´ì§€ëŸ¼ì¦', 'ëˆˆ í†µì¦', 'ì½”ë§‰í˜', 'ëª©ì•„í””'],
                torso: ['ê°€ìŠ´ í†µì¦', 'ë³µí†µ', 'ì†ì“°ë¦¼', 'ë“± í†µì¦', 'í—ˆë¦¬ í†µì¦'],
                'arm-right': ['ì˜¤ë¥¸ìª½ ì–´ê¹¨ ê²°ë¦¼', 'ì˜¤ë¥¸ìª½ íŒ”ê¿ˆì¹˜ í†µì¦', 'ì˜¤ë¥¸ìª½ ì†ëª©/ì†ê°€ë½ ì €ë¦¼'],
                'arm-left': ['ì™¼ìª½ ì–´ê¹¨ ê²°ë¦¼', 'ì™¼ìª½ íŒ”ê¿ˆì¹˜ í†µì¦', 'ì™¼ìª½ ì†ëª©/ì†ê°€ë½ ì €ë¦¼'],
                'leg-right': ['ì˜¤ë¥¸ìª½ ê³ ê´€ì ˆ í†µì¦', 'ì˜¤ë¥¸ìª½ ë¬´ë¦ í†µì¦', 'ì˜¤ë¥¸ìª½ ë°œëª©/ë°œë°”ë‹¥ í†µì¦'],
                'leg-left': ['ì™¼ìª½ ê³ ê´€ì ˆ í†µì¦', 'ì™¼ìª½ ë¬´ë¦ í†µì¦', 'ì™¼ìª½ ë°œëª©/ë°œë°”ë‹¥ í†µì¦']
            };

            // --- ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì • ---

            // 1ë‹¨ê³„: ì„±ë³„ ì„ íƒ
            document.querySelectorAll('.gender-btn').forEach(button => {
                button.addEventListener('click', () => {
                    userSelections.gender = button.dataset.gender;
                    steps.gender.classList.add('hidden');
                    leftPanel.classList.remove('hidden'); // ì™¼ìª½ íŒ¨ë„(SVG) ë³´ì´ê¸°
                    steps.bodyPart.classList.remove('hidden');
                });
            });

            // SVGê°€ ë¡œë“œë˜ë©´ í´ë¦­ ì´ë²¤íŠ¸ ì„¤ì •
            bodyObject.addEventListener('load', setupSvgEventListeners);

            // 3ë‹¨ê³„ -> 4ë‹¨ê³„
            document.getElementById('to-step4-btn').addEventListener('click', handleSymptomSubmission);
            
            // 4ë‹¨ê³„ -> ê²°ê³¼
            document.getElementById('get-result-btn').addEventListener('click', handleConditionSubmission);

            // ì¬ì‹œì‘
            document.getElementById('restart-btn').addEventListener('click', restart);

            // --- í•µì‹¬ í•¨ìˆ˜ ---

            function setupSvgEventListeners() {
                const svgDoc = bodyObject.contentDocument;
                if (!svgDoc) {
                    console.error("SVG ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë¡œì»¬ ì„œë²„ì—ì„œ ì‹¤í–‰í•˜ê³  ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.");
                    return;
                }

                // ìƒì„¸ ì§€ë„ì˜ í´ë¦­ ê°€ëŠ¥í•œ ëª¨ë“  ë¶€ìœ„ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.
                const clickableParts = svgDoc.querySelectorAll('.head, .torso, .arm-right, .arm-left, .leg-right, .leg-left');
                
                clickableParts.forEach(part => {
                    part.addEventListener('click', (e) => {
                        const partName = Array.from(e.currentTarget.classList).find(c => symptomsData.hasOwnProperty(c));
                        
                        if (!partName) return;

                        userSelections.part = partName;
                        
                        populateSymptoms(partName);
                        steps.bodyPart.classList.add('hidden');
                        steps.symptoms.classList.remove('hidden');
                    });
                });
            }

            function populateSymptoms(partName) {
                symptomOptionsContainer.innerHTML = '';
                const symptoms = symptomsData[partName] || [];
                symptoms.forEach(symptom => {
                    const button = document.createElement('button');
                    button.className = 'btn symptom-btn';
                    button.dataset.symptom = symptom;
                    button.textContent = symptom;
                    button.addEventListener('click', () => button.classList.toggle('selected'));
                    symptomOptionsContainer.appendChild(button);
                });
            }

            function handleSymptomSubmission() {
                userSelections.symptoms = Array.from(document.querySelectorAll('.symptom-btn.selected')).map(btn => btn.dataset.symptom);
                const details = document.getElementById('symptom-details').value;
                if (details) userSelections.symptoms.push(`(ìƒì„¸: ${details})`);

                if (userSelections.symptoms.length === 0) {
                    alert('ì¦ìƒì„ í•˜ë‚˜ ì´ìƒ ì„ íƒí•´ì£¼ì„¸ìš”.');
                    return;
                }
                
                steps.symptoms.classList.add('hidden');
                steps.conditions.classList.remove('hidden');
            }
            
            function handleConditionSubmission() {
                 userSelections.conditions = Array.from(document.querySelectorAll('.condition-btn.selected')).map(btn => btn.dataset.condition);
                 analyzeAndShowResult();
                 steps.conditions.classList.add('hidden');
                 steps.result.classList.remove('hidden');
            }

            function analyzeAndShowResult() {
                const { part, symptoms, gender, conditions } = userSelections;
                const genderText = gender === 'male' ? 'ë‚¨ì„±' : 'ì—¬ì„±';
                let html = `<h3>ë¶„ì„ ê²°ê³¼ (ì˜ˆì‹œ)</h3>
                            <p><strong>ì„±ë³„:</strong> ${genderText}</p>
                            <p><strong>ì•„í”ˆ ë¶€ìœ„:</strong> ${part}</p>
                            <p><strong>ì¦ìƒ:</strong> ${symptoms.join(', ')}</p>
                            <p><strong>ìƒí™©:</strong> ${conditions.join(', ')}</p>
                            <p class="warning">ì´ ê²°ê³¼ëŠ” ì˜ˆì‹œì…ë‹ˆë‹¤. ì‹¤ì œ ë¶„ì„ ë¡œì§ì„ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.</p>`;
                resultContent.innerHTML = html;
            }

            function restart() {
                userSelections = { gender: null, part: null, symptoms: [], conditions: [] };
                document.querySelectorAll('.btn.selected').forEach(btn => btn.classList.remove('selected'));
                document.getElementById('symptom-details').value = '';
                
                Object.values(steps).forEach(step => step.classList.add('hidden'));
                leftPanel.classList.add('hidden');
                steps.gender.classList.remove('hidden');
            }
            
            // ì¡°ê±´ ë²„íŠ¼ í† ê¸€ ê¸°ëŠ¥
            document.querySelectorAll('.condition-btn').forEach(button => {
                button.addEventListener('click', () => button.classList.toggle('selected'));
            });
        });
    </script>
</body>

</html>
